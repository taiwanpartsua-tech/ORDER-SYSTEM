# Налаштування Netlify для Supabase

## Проблеми

### Проблема 1: Білий екран або помилка "TypeError: Failed to fetch"
Це означає що змінні середовища не налаштовані в Netlify.

### Проблема 2: Сайт показує стару версію після деплою
Якщо після деплою сайт показує стару версію, потрібно очистити кеш.

## Локальна розробка

Якщо ви працюєте локально (npm run dev):
1. Переконайтеся що файл `.env` існує в корені проекту
2. Перезапустіть dev-сервер: зупиніть (Ctrl+C) і запустіть знову `npm run dev`
3. Змінні середовища завантажуються тільки при старті dev-сервера

## Розгортання на Netlify

1. Перейдіть до вашого сайту на Netlify
2. Відкрийте: **Site configuration → Environment variables**
3. Додайте дві змінні:

### Змінна 1:
- **Key:** `VITE_SUPABASE_URL`
- **Value:** `https://nzycllwwkizjbpxpozzq.supabase.co`

### Змінна 2:
- **Key:** `VITE_SUPABASE_ANON_KEY`
- **Value:** `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im56eWNsbHd3a2l6amJweHBvenpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU1MzU2MTksImV4cCI6MjA4MTExMTYxOX0.Zgk3-PyJhvZEIn3EszSD1mAl_HD-i6Go9qwCl7IrxvM`

4. **Важливо:** Після додавання змінних, натисніть кнопку **"Redeploy"** або зробіть новий commit, щоб перебудувати сайт з новими змінними.

5. Після перебудови відкрийте консоль браузера (F12) і перезавантажте сторінку. Ви повинні побачити:
   ```
   Supabase Config: { url: "https://nzycllwwkizj...", key: "eyJhbGciOiJIUzI1NiIs...", ... }
   ```

6. Якщо все налаштовано правильно, функція додавання замовлення буде працювати.

## Діагностика

Після оновлення сайту:
1. Натисніть F12 для відкриття консолі
2. Перезавантажте сторінку
3. Перегляньте перші повідомлення в консолі - там буде інформація про конфігурацію Supabase
4. Спробуйте додати замовлення - в консолі будуть детальні логи кожного кроку

## Очищення кешу (якщо сайт показує стару версію)

### Крок 1: Очистити кеш на Netlify
1. Перейдіть до вашого сайту на Netlify
2. Натисніть **Deploys** → виберіть останній деплой
3. Натисніть **Options** → **Clear cache and retry with latest branch commit**
4. Дочекайтеся завершення перебудови

### Крок 2: Очистити кеш браузера
Після очищення кешу на Netlify, очистіть кеш в браузері:

#### Chrome/Edge:
1. Натисніть `Ctrl+Shift+Delete` (Windows) або `Cmd+Shift+Delete` (Mac)
2. Виберіть "Cached images and files"
3. Натисніть "Clear data"
4. АБО просто натисніть `Ctrl+F5` для жорсткого перезавантаження

#### Firefox:
1. Натисніть `Ctrl+Shift+Delete` (Windows) або `Cmd+Shift+Delete` (Mac)
2. Виберіть "Cache"
3. Натисніть "Clear Now"
4. АБО просто натисніть `Ctrl+F5` для жорсткого перезавантаження

#### Safari:
1. Натисніть `Cmd+Option+E` для очищення кешу
2. АБО натисніть `Cmd+Option+R` для жорсткого перезавантаження

### Крок 3: Перевірка версії
Тепер файл `netlify.toml` налаштований так, що:
- `index.html` НІКОЛИ не кешується (завжди береться свіжа версія)
- Файли в `/assets/*` кешуються назавжди (але мають унікальні хеші в іменах)
- Це означає, що після очищення кешу ви завжди отримаєте найновішу версію
